Function("return this")().Config={viewOptions:{templatesFolder:"app"}},function(t){void 0===Array.prototype.find&&(Array.prototype.find=function(t){for(var e=0;e<this.length;e++)if(t(this[e]))return this[e]});var e={clean:function(t){if(!Array.isArray(t))throw{message:"[Array:Clean] Cannot work with a non-array!"};for(var e=0;e<t.length;e++)void 0===t[e]?(t.splice(e,1),e--):Array.isArray(t[e])&&this.clean(t[e])}};t.Utils=t.Utils||{},t.Utils.Array=e}(Function("return this")()),function(t){var i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e={getDateString:function(t,e){e=e||"/";var r=t.getDate(),n=t.getMonth()+1;return r<10&&(r="0"+r),n<10&&(n="0"+n),[r,n,t.getFullYear()].join(e)},getDayString:function(t){var e=t.getMonth()+1,r=t.getDay(),n=t.getDate();return i[r]+", "+o[e-1]+" "+n},getTimeString:function(t){var e=t.getHours(),r=t.getMinutes();return e<10&&(e="0"+e),r<10&&(r="0"+r),[e,r].join(":")}};t.Utils=t.Utils||{},t.Utils.Date=e}(Function("return this")()),function(r){var a={},n={},t={get:function(t,e,r,n){var i=new XMLHttpRequest,o=e.options||{};if(t+=c(e.clean?{}:a,e.params),i.open("GET",t,!0),"object"==typeof e.headers)for(var s in e.headers)e.headers.hasOwnProperty(s)&&i.setRequestHeader(s,e.headers[s]);i.onreadystatechange=function(){4===i.readyState&&(200===i.status?l(o.plainText?i.responseText:JSON.parse(i.responseText),r):"function"==typeof n&&n(i.responseText))},i.send()},post:function(t,e,r,n){var i=new XMLHttpRequest;if(t+=c(a,e.params),i.open("POST",t,!0),"object"==typeof e.headers)for(var o in e.headers)e.headers.hasOwnProperty(o)&&i.setRequestHeader(o,e.headers[o]);"object"==typeof(e=e.body)&&i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){if(4===i.readyState){var t=JSON.parse(i.responseText);200===i.status?l(t,r):"function"==typeof n&&n(t)}},i.send(JSON.stringify(e))},updatePermaParam:function(t,e){void 0===e?delete a[t]:a[t]=e},subscribeToResponseParam:function(t,e){return n[t]instanceof r.Utils.Observable||(n[t]=new r.Utils.Observable),n[t].subscribe(e)}};function l(t,e){for(var r in n)n.hasOwnProperty(r)&&t.hasOwnProperty(r)&&n[r].next(t[r]);e(t)}function c(){for(var t,e={},r=0;r<arguments.length;r++){var n=arguments[r];for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}for(var o in e)if(e.hasOwnProperty(o))switch(t||(t="?"),typeof e[o]){case"object":if(Array.isArray(e[o]))for(var s=0;s<e[o].length;s++)t+=o+"="+e[o][s]+"&";break;default:t+=o+"="+e[o]+"&"}return t&&t.substr(0,t.length-1)||""}r.Utils=r.Utils||{},r.Utils.Http=t}(Function("return this")()),function(t){var e={random:function(t,e){return t+parseInt(Math.random()*(e-t+1))},humanize:function(t,e){for(var r=0,n=e.prefix||"";0!==parseInt(t/1e3);)t/=1e3,r+=3;return n+t+(3===r?e.shortSuffix?"K":" Thousands":6===r?e.shortSuffix?"M":" Million":9===r?e.shortSuffix?"B":" Billion":"")}};t.Utils=t.Utils||{},t.Utils.Number=e}(Function("return this")()),function(t){var s="[Object]",a={findInObject:function(t,e){for(var r=e.split("."),n=0;0<r.length&&"object"==typeof t;)t=t[r[n++]];return t},updateObject:function(t,e,r){if(t&&e){var n=0;if("object"==typeof t&&"object"==typeof e)for(var i in e)if(e.hasOwnProperty(i)&&!o(i))switch(typeof e[i]){case"object":Array.isArray(e[i])?console.warning('[Utils:Object] "updateObject" does not support merging arrays.'):n+=a.updateObject(t[i],e[i]);break;default:t[i]!==e[i]&&(t[i]=e[i],n++)}}function o(t){return Array.isArray(r)?0<=r.indexOf(t):t===r}return n},makeDictionary:function(t,e){if(!Array.isArray(t)||"string"!=typeof e)return console.error(s,"makeDictionary usage error.");for(var r={},n=0;n<t.length;n++)"object"==typeof t[n]&&(r[this.findInObject(t[n],e)]=t[n]);return r},groupByKey:function(t,e){if(!Array.isArray(t)||"string"!=typeof e)return console.error(s,"groupByKey usage error.");for(var r,n,i={},o=0;o<t.length;o++)r=t[o],i[n=this.findInObject(r,e)]=i[n]||[],i[n].push(r);return i}};t.Utils=t.Utils||{},t.Utils.Object=a}(Function("return this")()),function(t){var e=function(){this.listeners=[],this.lastMessage=void 0};e.prototype={subscribe:function(t){if("function"==typeof t)return this.listeners.push(t),{unsubscribe:this.unsubscribe.bind(this,t)};console.error(t,"is not a function. Cannot subscribe to Observable.")},unsubscribe:function(t){this.listeners.splice(this.listeners.indexOf(t),1)},next:function(){var e=arguments;this.listeners.forEach(function(t){t.apply({},e)}),this.lastMessage=1<e.length?e:e[0]}},t.Utils=t.Utils||{},t.Utils.Observable=e}(Function("return this")()),function(t){t.Utils=t.Utils||{},t.Utils.Storage=function(t,e){var r,n;function i(t){try{var e=window[t],r="__storage_test__";return e.setItem(r,r),e.removeItem(r),t}catch(t){return"cookie"}}if(0===(n=i("localStorage")).localeCompare("cookie")&&(n=i("sessionStorage")),null!=e&&("object"==typeof e&&(e=JSON.stringify(e)),0===n.localeCompare("localStorage")?localStorage.setItem(t,e):0===n.localeCompare("sessionStorage")?sessionStorage.setItem(t,e):o(t,e,30)),void 0===e){r=0===n.localeCompare("localStorage")?localStorage.getItem(t):0===n.localeCompare("sessionStorage")?sessionStorage.getItem(t):function(t){for(var e=t+"=",r=document.cookie.split(";"),n=0,i=r.length;n<i;n++){for(var o=r[n];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return null}(t);try{return JSON.parse(r)}catch(t){return r}}function o(t,e,r){var n=new Date;n.setTime(n.getTime()+24*r*60*60*1e3);var i="; expires="+n.toGMTString();document.cookie=t+"="+e+i+"; path=/"}null===e&&(0===n.localeCompare("localStorage")?setTimeout(function(){localStorage.removeItem(t)},90):0===n.localeCompare("sessionStorage")?setTimeout(function(){sessionStorage.removeItem(t)},90):o(t,"",-1))}}(Function("return this")()),function(t){"function"!=typeof String.prototype.format&&(String.prototype.format=function(){var r=arguments[0]instanceof Array?arguments[0]:arguments;return this.replace(/{(\d+)}/g,function(t,e){return void 0!==r[e]?r[e]:t})});var e={toKeyValueArray:function(t,e){"string"!=typeof e&&(e=",");var r,n=t.split(e),i=[];return n.forEach(function(t){r=/([\w-]+): *(.+)/g.exec(t.trim()),i.push({key:r[1],value:r[2]})}),i},toDictionary:function(t,e,r,n){"string"!=typeof e&&(e=","),"string"!=typeof r&&(r=":");for(var i,o=n?t.split(n):t.split(e),s={},a=0;a<o.length;a++)0===o[a].length?o.splice(a--,1):o[a]=o[a].trim();return o.forEach(function(t){var e=new RegExp("([\\w-]+)"+r+" *(.+)");i=e.exec(t.trim()),Array.isArray(i)&&3===i.length&&(s[i[1]]=i[2])}),s},numberSeparator:function(t,o){var e=t.toString().split("."),r=parseInt(e[0].replace(/[^\d]/g,""));void 0===o&&(o=",");for(var n=a(r.toString()),i=new RegExp(/(\d)(\d)(\d)(\d)/);i.test(n);)n=n.replace(i,s);return t=a(n)+(1<e.length?"."+e[1]:"");function s(t,e,r,n,i){return e+r+n+o+i}function a(t){for(var e="",r=t.length-1;0<=r;r--)e+=t[r];return e}}},r={email:new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?")};t.Utils=t.Utils||{},t.Utils.String=e,t.Utils.RegExp=r}(Function("return this")()),function(j){var N=function(t,e){this.viewNode=t,this.self=t.self.cloneNode(!1),Array.isArray(e)&&(this.values=e),this.children=[]};N.prototype.compare=function(t,e){var r=!1,n=t.$scope,i=e&&e.recursive;if(Array.isArray(this.viewNode.directives))for(var o,s,a=this.viewNode.directives,l=0,c=0;c<a.length;c++)if(a[c]){var h,p,u;if(s=(o=a[c].injectable).getter(a[c].statement,t),Array.isArray(a[c].pipes))for(h=0;h<a[c].pipes.length;h++){var f;if(p=a[c].pipes[h],(u=j.App.getPipe(p.name))instanceof j.Base.Pipe)p.dataStatement&&(f=t.evalWithScope(p.dataStatement)),s=u.transform(s,f)}if(o.compare(this.values[c-l],s)){if(s&&Array.isArray(s.array))break;if(!1===s&&void 0===this.self)break}else{if(this.values[c-l]=s,!o.justModify||!this.self){r=!0;break}o.modifier(this,s)}}else l++;if(r){var d=this.viewNode.generate(t);this.iteratorValue&&(d.iteratorValue=this.iteratorValue),this.parent.replaceChild(d,this),d.isComponent()&&d.bootstrap(t)}else if(this.multipleNodes){var v,g=this.viewNode,m=this.iterator,y=n[m.varName],b=g.directives[c],C=c;for(g.directives[C]=void 0,c=0;c<m.array.length;c++)n[m.varName]=m.array[c],this.children[c]instanceof N?(this.children[c].compare(t),this.children[c].iteratorValue=m.array[c]):((v=g.generate(t)).iteratorValue=m.array[c],this.appendChild(v),v.isComponent()&&v.bootstrap());for(var A=c;c<this.children.length;c++)this.removeChild(this.children[c]);this.children.splice(A,c-A),n[m.varName]=y,g.directives[C]=b}else{var w,S,O;for(w=0;w<this.children.length;w++)O=(S=this.children[w]).compare(t,e),i&&S.isComponent()&&!O&&(S.comp?S.comp.update(e):setTimeout(function(t,e){t.comp&&t.comp.update(e)},0,S,e))}return r},N.prototype.appendChild=function(t){this.children.push(t),(t.parent=this).self&&t.self&&this.self.appendChild(t.self)},N.prototype.replaceChild=function(t,e){if(t.parent=e.parent,t.self&&e.self)this.removeChild(e,t);else if(t.self&&!e.self){var r=this.children.indexOf(e);if(0<=r){var n;for(this.children.splice(r,1,t);!n&&r<this.children.length-1;)this.children[++r].self&&(n=this.children[r].self);n?n.parentNode.insertBefore(t.self,n):this.self&&this.self.appendChild(t.self)}else console.error("CompNode: replaceChild failed, 2nd parameter is not a child of this node.")}else!t.self&&e.self&&this.removeChild(e)},N.prototype.removeChild=function(t,e){if(t.comp instanceof j.Base.Component)t.comp.onDestroy(),delete t.comp;else if(Array.isArray(t.children)){for(var r=0;r<t.children.length;r++)t.removeChild(t.children[r]);t.children.splice(0,t.children.length)}if(e)this.children.splice(this.children.indexOf(t),1,e),this.self.replaceChild(e.self,t.self);else if(t.self&&this.self){for(var n=0;n<this.self.childNodes.length;n++)if(this.self.childNodes[n]===t.self){this.self.removeChild(t.self);break}t.self=void 0}},N.prototype.isComponent=function(){return this.self&&1===this.self.nodeType&&(this.viewNode.controller||"string"==typeof this.self.getAttribute("controller"))&&!this.iterator},N.prototype.bootstrap=function(t){j.Core.Bootstrap(this.self,t,this.inputs,function(t){this.comp=t,this.self=t.nodeTree.self}.bind(this))},j.Base=j.Base||{},j.Base.CompNode=N}(Function("return this")()),function(global){var Component=function(t,e,r,n){this.name=t,this.el=e,this.processing=!1,r instanceof Component&&((this.parent=r).children=r.children||[],r.children.push(this)),this.$scope=n};Component.prototype.setView=function(t){this.el.parentNode.replaceChild(t.self,this.el),this.nodeTree=t,this.el=t.self},Component.prototype.update=function(t){this.nodeTree instanceof global.Base.CompNode&&!this.processing&&(this.processing=!0,this.nodeTree.compare(this,t),this.processing=!1)},Component.prototype.getInput=function(t,e){return this.inputs&&this.inputs.hasOwnProperty(t)&&(void 0!==this.inputs[t]||void 0===e)?this.inputs[t]:e},Component.prototype.evalWithScope=function(_,options){try{with(this.$scope)_=eval(_)}catch(t){this.error(t.message)}return options=options||{},options.type&&"array"===options.type&&!Array.isArray(_)?(this.error(_+" is not an array."),[]):_},Component.prototype.error=function(t){var e="[Component:"+this.name+"]";console.error(e,t)},Component.prototype.onDestroy=function(){if("function"==typeof this.$scope.onDestroy&&this.$scope.onDestroy(),Array.isArray(this.children))for(;0<this.children.length;)this.children[0].onDestroy();Array.isArray(this.subscriptions)&&this.subscriptions.forEach(function(t){t.unsubscribe()}),this.parent instanceof Component&&this.parent.children.splice(this.parent.children.indexOf(this),1)},global.Base=global.Base||{},global.Base.Component=Component}(Function("return this")()),function(s){var t=function(t,e,r){this.name=t,this.view=e,this.constructor=r};t.prototype.generateComponent=function(t,e,r,n){var i={},o=new s.Base.Component(this.name,t,e,i);return"object"==typeof r&&(o.inputs=r),i.getInput=function(t,e){i[t]=this.getInput(t,e)}.bind(o),i.addSubscription=function(){this.subscriptions=this.subscriptions||[];for(var t=0;t<arguments.length;t++)this.subscriptions.push(arguments[t])}.bind(o),this.constructor.call(this,i,o.update.bind(o)),this.view.generate(o,function(t){o.setView(t),"function"==typeof n&&n(o)}),o},s.Base=s.Base||{},s.Base.Controller=t}(Function("return this")()),function(t){var e=function(t,e){this.name=t;try{this.modifier=e.modifier.bind(this)}catch(t){console.error("[Injectable]",this.name+": No modifier set.")}"function"==typeof e.getter&&(this.getter=e.getter.bind(this)),"function"==typeof e.compare&&(this.compare=e.compare.bind(this)),this.keepAttribute=!!e.keepAttribute,this.justModify=!!e.justModify,this.useComponentInGetter=!!e.useComponentInGetter};e.prototype.getter=function(t,e){return e.evalWithScope(t)},e.prototype.compare=function(t,e){if(t===e)return!0},t.Base=t.Base||{},t.Base.Injectable=e}(Function("return this")()),function(t){var e=function(t,e){this.name=t,this.initFunc=e,this.events={},this.init()};e.prototype.init=function(){if(this.data=[],"function"!=typeof this.initFunc)throw{message:this.name+": Couldn't initialize the model (initFunc err)"};this.initFunc(function(t,e){this.setData(t,!!e)}.bind(this))},e.prototype.setData=function(t,e,r){if((e=!!e)&&this.data)for(var n=0;n<t.length;n++)this.data.push(t[n]);else this.data=t;this.emit(r||"setData",this.data)},e.prototype.emit=function(){for(var t,e=[],r=0;r<arguments.length;r++)0===r?t=arguments[r]:e.push(arguments[r]);if(Array.isArray(this.events[t]))for(var n=0;n<this.events[t].length;n++)this.events[t][n].apply(void 0,e)},e.prototype.subscribe=function(t,e){return this.events[t]||(this.events[t]=[]),this.events[t].push(e),{unsubscribe:function(t,e){var r=this.events[t].indexOf(e);this.events[t].splice(r,1)}.bind(this,t,e)}},t.Base=t.Base||{},t.Base.Model=e}(Function("return this")()),function(t){var e=function(t,e){this.name=t,this.func=e};e.prototype.transform=function(t,e){if(Array.isArray(t)){var r=this.func;return t.map(function(t){return r(t,e)})}if("object"!=typeof t)return this.func(t,e);var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=this.func(t[i],e));return n},t.Base=t.Base||{},t.Base.Pipe=e}(Function("return this")()),function(t){var e="[Route]",r=function(t){if(!t.hasOwnProperty("path"))throw{message:e+" Route must have a path."};if(this.path=t.path.split("/"),t.hasOwnProperty("controller"))this.controller=t.controller;else{if(!t.hasOwnProperty("redirect"))throw{message:e+" Route must have a controller."};this.redirect=t.redirect}Array.isArray(t.children)&&(this.children=t.children.map(function(t){return new r(t)}))};r.prototype.checkUrl=function(t,e){var r=0;if(this.path.length>t.length)return!1;for(var n=0;n<this.path.length;n++)this.path[n]===t[n]&&r++;if(this.path.length!==r)return!1;if(this.redirect)return{redirect:this.redirect};if(Array.isArray(e)||(e=[]),e.push(this.controller),this.path.length<t.length){if(!Array.isArray(this.children))return!1;var i=!1;for(t.splice(0,r),n=0;n<this.children.length&&!i;n++){var o=this.children[n].checkUrl(t,e);if(o){if(o.redirect)return o;i=e}}return i?{controllers:i}:i}if(Array.isArray(this.children)){var s=this.children.find(function(t){return 1===t.path.length&&""===t.path[0]});if(s)return s.checkUrl([""],e)}return{controllers:e}},t.Base=t.Base||{},t.Base.Route=r}(Function("return this")()),function(o){var i=o.Config.viewOptions,t=function(t,e,r){this.name=t,this.relPath=e,r&&(this.templateSrc=r),this.loadTemplate(e)};t.prototype.loadTemplate=function(t){var e=this,r=i.templatesFolder+"/"+t+this.name+".html",n=o.ENV.Version;r=r.replace(/\/\//g,"/"),o.Utils.Http.get(r+"?v="+encodeURIComponent(n),{options:{plainText:!0}},function(t){e.templateSrc=t},function(t){console.error(t)})},t.prototype.buildNodeTree=function(){var t=document.createElement("temp");t.innerHTML=this.templateSrc;for(var e=new o.Base.ViewNode(document.createElement(this.name)),r=0;r<t.childNodes.length;r++)e.children.push(i(t.childNodes[r]));function i(t){for(var e,r=new o.Base.ViewNode(t),n=0;n<t.childNodes.length;n++)((e=i(t.childNodes[n])).parent=r).children.push(e);return r}this.nodeTree=e},t.prototype.generate=function(t,e){if(this.templateSrc){this.nodeTree||this.buildNodeTree();for(var r=new o.Base.CompNode(this.nodeTree),n=0;n<this.nodeTree.children.length;n++)r.appendChild(this.nodeTree.children[n].generate(t));"function"==typeof e&&e(r)}else setTimeout(function(){this.generate(t,e)}.bind(this),0)},o.Base=o.Base||{},o.Base.View=t}(Function("return this")()),function(m){var t=function(t){this.self=t,this.children=[],this.parseNode()};t.prototype.parseNode=function(){var t,e,r=this.self.attributes;if(r&&0<r.length)for(var n=0;n<r.length;n++)if(t=r[n].name,e=r[n].value,"controller"===t)this.controller=e;else{var i,o=e.split(" | "),s=m.App.getInjectable(t);if(s instanceof m.Base.Injectable){if(e=o[0],o.splice(0,1),0<o.length){i=[];for(var a=0;a<o.length;a++){var l=o[a].trim().split(/:(.+)/g);l=l.filter(function(t){return 0<t.length}),i.push({name:l[0],dataStatement:l[1]})}}Array.isArray(this.directives)||(this.directives=[]),this.directives.push({injectable:s,statement:e,pipes:i}),i=void 0,s.keepAttribute||(this.self.removeAttribute(t),n--)}}},t.prototype.generate=function(i){var t,e,r=new m.Base.CompNode(this),n=i.$scope;if(Array.isArray(this.directives))for(r.values=[],e=0;e<this.directives.length&&r.self;e++)if(this.directives[e]){var o,s,a,l=(t=this.directives[e]).injectable.getter(t.statement,i);if(Array.isArray(t.pipes))for(o=0;o<t.pipes.length;o++){var c;if(s=t.pipes[o],(a=m.App.getPipe(s.name))instanceof m.Base.Pipe)s.dataStatement&&(c=i.evalWithScope(s.dataStatement)),l=a.transform(l,c)}if(t.injectable.modifier(r,l),r.values.push(l),r.multipleNodes)break}if(r.self)if(r.multipleNodes){var h,p=r.iterator.array,u=n[r.iterator.varName],f=this.directives[e],d=e;if("string"==typeof r.iterator.indexVarName)var v=r.iterator.indexVarName,g=n[v];for(this.directives[e]=void 0,e=0;e<p.length;e++)n[r.iterator.varName]=p[e],v&&(n[v]=e),(h=this.generate(i)).iteratorValue=p[e],r.appendChild(h),h.isComponent()&&h.bootstrap(i);n[r.iterator.varName]=u,this.directives[d]=f,g&&(n[v]=g)}else!function(t,e){for(var r,n=0;n<t.children.length;n++)r=t.children[n].generate(i),e.appendChild(r),r.replaceSelfWith&&(r.self.parentNode.replaceChild(r.replaceSelfWith.self,r.self),delete r.replaceSelfWith),r.isComponent()&&r.bootstrap(i)}(this,r);return r},m.Base=m.Base||{},m.Base.ViewNode=t}(Function("return this")()),function(o){o.Core=o.Core||{},o.Core.Bootstrap=function(t,e,r,n){if(1!==t.nodeType)throw{message:"Cannot bootstrap a non-element object."};var i=function(t){var e=t.getAttribute("controller");if("string"==typeof e){var r=o.App.getController(e);if(r instanceof o.Base.Controller)return r}}(t);if(i instanceof o.Base.Controller)return i.generateComponent(t,e,r,n);throw{message:"Controller "+t.getAttribute("controller")+" not found."}}}(Function("return this")()),function(c){var r,h="[Router]",t=function(t){if(r)return r;if(!Array.isArray(t))throw{message:h+" Router should accept an array of routes."};var e;window.onhashchange=function(){this.navigateTo(location.hash,!0)}.bind(this);try{this.routes=t.map(function(t){return t.setAsDefault&&(e=t),new c.Base.Route(t)})}catch(t){throw t}this.navigations=0,this.onStateChange=new c.Utils.Observable,r=this,e&&(this.defaultRoute=e),this.navigateTo(location.hash)};t.prototype.navigateTo=function(t,e){var r;if(0<=t.indexOf(";")&&(t=t.replace(/;/g,"?")),"/"===t[0]&&(t=t.slice(1,t.length)),"#"===t[0]&&(t=t.slice("/"!==t[1]?1:2,t.length)),1<(t=t.split("#")).length&&(r=t[1]),(t=t[0])!==this.currentPath){this.navigating=!0;var n=t.split("?"),i=n[0],o=1<n.length?n[1]:"",s=i!==(this.currentPath||"").split("?")[0];this.navigations++,this.lastPath=this.currentPath||t,this.currentPath=t;var a=this.parseUrl(t);if(a){var l=a.results;l.redirect?(0<o.length&&(l.redirect+="?"+o),this.navigateTo(l.redirect)):("string"==typeof a.params&&0<a.params.length&&(a.params=c.Utils.String.toDictionary(a.params,"&","=")),e?history.replaceState(null,"","#/"+t+(r?"#"+r:"")):history.pushState(null,"","#/"+t+(r?"#"+r:"")),this.stateChange(a))}else this.defaultRoute?this.navigateTo(this.defaultRoute.path):console.error(h,"UNKNOWN ROUTE '"+t+"'. To avoid this error please 'setAsDefault' your main path.");this.navigating=!1,this.onStateChange.next(this.currentPath,s)}},t.prototype.parseUrl=function(t){var e,r=t.split("?"),n=r[1];r=r[0].split("/").filter(function(t){return"#"!==t});for(var i=0;i<this.routes.length&&!e;i++)e=this.routes[i].checkUrl(r);return!!e&&{results:e,params:n}},t.prototype.stateChange=function(t){var e=t.results;if(this.state){for(var r,n=0;n<e.controllers.length;n++)if(e.controllers[n]!==this.state.controllers[n]){for(var i=n;i<e.controllers.length;i++)this.state.controllers[i]=e.controllers[i];i<this.state.controllers.length&&this.state.controllers.splice(i,this.state.controllers.length),this.state.nextController=e.controllers[n],r=this.state.compNodes[n];break}if("object"==typeof t.params){for(var o in t.params)t.params.hasOwnProperty(o)&&this.updateParam(o,t.params[o]);for(o in this.state.params)this.state.params.hasOwnProperty(o)&&(t.params[o]||this.updateParam(o))}else{var s=this.state.params;if("object"==typeof s)for(o in s)s.hasOwnProperty(o)&&this.updateParam(o)}if(r instanceof c.Base.CompNode){var a=r.comp,l=r.viewNode.generate(a);r.parent.replaceChild(l,r),l.bootstrap(a.parent)}}else this.state={controllers:e.controllers,params:t.params,nextController:e.controllers[0]}},t.prototype.nextController=function(t){if(this.state&&this.state.nextController){var e=this.state.nextController;this.state.nextController=void 0;for(var r=0;r<this.state.controllers.length;r++)if(e===this.state.controllers[r]){Array.isArray(this.state.compNodes)||(this.state.compNodes=[]),r+1>=this.state.controllers.length?this.state.nextController=this.state.controllers[0]:this.state.nextController=this.state.controllers[r+1],this.state.compNodes[r]=t;break}return e}console.error(h,"Failed to load next controller, end of list.")},t.prototype.updateParam=function(t,e){var r=this.params(),n=0;if(r[t]!==e&&(e&&0!==e.length?r[t]=e:delete r[t],n++,this.paramSubscriptions)){var i=this.paramSubscriptions[t];i instanceof c.Utils.Observable&&i.next(e)}if(0<n){var o=location.hash;for(var s in o=o.split("?")[0]+"?",r)r.hasOwnProperty(s)&&(o+=s+"="+r[s]+"&");o=o.substr(2,o.length-3),this.navigating?history.replaceState(null,"","#/"+o):history.pushState(null,"","#/"+o),this.onStateChange.next(o),this.currentPath=o}this.state&&(this.state.params=r)},t.prototype.subscribeToParam=function(t,e){"object"!=typeof this.paramSubscriptions&&(this.paramSubscriptions={});var r=this.paramSubscriptions;r[t]instanceof c.Utils.Observable||(r[t]=new c.Utils.Observable);var n=r[t].subscribe(e);return this.state&&this.state.params&&e(this.state.params[t]),n},t.prototype.isLandingPage=function(){return this.lastPath===this.currentPath&&1===this.navigations},t.prototype.params=function(){return this.state&&"object"==typeof this.state.params?this.state.params:{}},c.Core=c.Core||{},c.Core.Router=t}(Function("return this")()),function(o){o.ENV={Version:"0.1"};var e,i={},r={},n={},s={};o.App={getController:function(t){return i[t]},getModel:function(t){return r[t]},getInjectable:function(t){return n[t]},getPipe:function(t){return s[t]},Bootstrap:function(t,e){var r="[Bootstrap]";"object"==typeof e&&o.Utils.Object.updateObject(o.Config,e);var n=document.querySelector('*[controller="'+t+'"]');{if(n&&1===n.nodeType){try{var i=o.Core.Bootstrap(n)}catch(t){console.error(r,t.message||t)}return i}console.error(r,"Could not find placeholder for '"+t+"'.")}},Controller:function(t,e,r){try{var n=new o.Base.View(t,e);i[t]=new o.Base.Controller(t,n,r)}catch(t){console.error("[Controller]",t.message)}},Model:function(t,e){try{r[t]=new o.Base.Model(t,e)}catch(t){console.error("[Model]",t.message)}},Injectable:function(t,e){try{n[t]=new o.Base.Injectable(t,e)}catch(t){console.error("[Injectable]",t.message)}},Pipe:function(t,e){try{s[t]=new o.Base.Pipe(t,e)}catch(t){console.error("[Pipe]",t.message)}},Router:function(t){e||(e=new o.Core.Router(t));return e}}}(Function("return this")()),function(o){o.App.Injectable("bind-attr",{justModify:!0,getter:function(t,e){var r,n=o.Utils.String.toDictionary(t);for(var i in n)n.hasOwnProperty(i)&&(r=e.evalWithScope(n[i]),n[i]=r);return n},modifier:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(!1===e[r]?t.self.removeAttribute(r):!0===e[r]?t.self.setAttribute(r,""):t.self.setAttribute(r,e[r]))}})}(Function("return this")()),function(o){o.App.Injectable("bind-class",{justModify:!0,getter:function(t,e){var r,n=o.Utils.String.toDictionary(t);for(var i in n)n.hasOwnProperty(i)&&(r=e.evalWithScope(n[i]),n[i]=!!r);return n},modifier:function(t,e){var r=0;for(var n in e)e.hasOwnProperty(n)&&(e[n]?(t.self.classList.add(n),r++):t.self.classList.remove(n));0===r&&0===t.self.classList.length&&t.self.removeAttribute("class")}})}(Function("return this")()),Function("return this")().App.Injectable("bind-if",{getter:function(t,e){return!!e.evalWithScope(t)},modifier:function(t,e){e||(t.self=void 0)}}),Function("return this")().App.Injectable("content-outlet",{getter:function(t,e){return e},modifier:function(t,e){e.subView&&(t.replaceSelfWith=e.subView.generate(e.parent))}}),function(h){h.App.Injectable("bind-events",{getter:function(t,i){var e,r,n,o=new RegExp("([a-z]+\\: ?.+?\\(.*?\\)), ?"),s=h.Utils.String.toDictionary(t,!1,!1,o);for(var a in s)if(s.hasOwnProperty(a)){var l=new RegExp("^(.+)\\((.*)\\)$");if(e=s[a].match(l),!Array.isArray(e)||e.length<2)throw this.name+": Invalid statement, expecting: [event: func()]";r=e[1],n=e[2].split(",");for(var c=0;c<n.length;c++)n[c]=i.evalWithScope(n[c]);s[a]={variables:n,func:function(t,e,r){var n=i.evalWithScope(t);"function"==typeof n&&n.apply(r,e)}.bind(this,r,n)}}return s},modifier:function(t,e){for(var r in e)e.hasOwnProperty(r)&&t.self.addEventListener(r,function(t,e){e&&e.preventDefault?e.preventDefault():e.returnValue=!1;try{t(e.currentTarget)}catch(t){console.error("[Injectable]",t)}}.bind(this,e[r].func))},compare:function(t,e){for(var r in t){if(!e[r])return!1;var n=t[r].variables,i=e[r].variables;if(n.length!==i.length)return!1;for(var o=0;o<n.length;o++)if(n[o]!==i[o])return!1}return!0}})}(Function("return this")()),function(i){i.App.Injectable("input",{getter:function(t,e){var r=i.Utils.String.toDictionary(t);for(var n in r)r.hasOwnProperty(n)&&(r[n]=e.evalWithScope(r[n]));return r},modifier:function(t,e){t.inputs=e},compare:function(t,e){var r=!0;for(var n in e)if(e.hasOwnProperty(n)&&e[n]!==t[n]){r=!1;break}return r}})}(Function("return this")()),Function("return this")().App.Injectable("bind-for",{getter:function(t,e){for(var r=t.split(" "),n={},i=0;i<r.length;i++)if("in"===r[i]&&0<i&&i<r.length-1&&(n.array=e.evalWithScope(r[i+1],{type:"array"}),n.varName=r[i-1]),"let"===r[i]&&i<r.length-2){var o=r[++i];switch(r[++i]){case"index":n.indexVarName=o}}return n},modifier:function(t,e){t.self=document.createElement("iterator"),t.multipleNodes=!0,t.iterator=e},compare:function(t,e){return t.array===e.array}}),Function("return this")().App.Injectable("bind-replace",{modifier:function(t,e){t.self instanceof HTMLInputElement&&t.self.addEventListener("input",function(t){t&&t.preventDefault&&t.preventDefault(),"string"==typeof e&&(e=new RegExp(e,"g")),this.value=this.value.replace(e,"")})},compare:function(t,e){return String(t)===String(e)}}),function(n){n.App.Injectable("router-outlet",{getter:function(t,e){return!0},modifier:function(t,e){var r=n.App.Router().nextController(t);if(!(n.App.getController(r)instanceof n.Base.Controller))throw'[Router-Outlet] could not find controller "'+r+'".';t.self.setAttribute("controller",r)}})}(Function("return this")()),Function("return this")().App.Injectable("bind-value",{justModify:!0,modifier:function(t,e){t.self instanceof HTMLInputElement&&(t.self.value=e),"function"==typeof e&&(e=typeof e),t.self.innerText=e}});